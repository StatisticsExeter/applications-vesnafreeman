---
title: "Understanding costs"
author: "Anonymous"
format: 
  html:
    embed-resources: true
    math: mathjax

---


## The Problem
The data originates from the Energy Performance of Buildings Register, and it was retrieved in March 2025. The main aim is to determine if some local authorities are better than others at reducing their carbon emissions. Some buildings are automatically large contributors to carbon emissions since they are older or have multiple rooms. Therefore, we will complete an aggregate data analysis where the grouping is the local authority. Additionally, we are taking into considerations houses being built pre- or post-1930 and having between 1 and 10 rooms. This allows to fit a model which has fixed effects for the number of houses of pre-1930, post-1930 and the various number of heated rooms.


$$Y_{ji} = \beta_0 + \beta_1 x_{j}^{(\text{old})} + \sum_{r=1}^{10} \beta_r x_{j}^{(r)} + \gamma_j$$

Where 

- $Y_{ji}$ is the average carbon dioxide emissions for authority $j$ for each house type $i$ (old/new, 1, 2, ..., 10 rooms)
- $x_{j}^{(old)}$ is the number of houses that are older than 1930 in authority $j$
- $x_{j}^r$ are the number of houses with $r=1, 2, ..., 10$ rooms in authority $j$ 
- $\beta_0$, $\beta_1$, $\beta_r$ are the fixed effects
- $\gamma_j$ is the random effect for local authority $j$




## The Data

Firstly, we conduct exploratory data analysis to understand how the data is distributed. 
We can see that old houses have on average a higher carbon consumption since they have a greater range and average shortfall from the ideal carbon footprint. Also, the number of rooms appears to influence carbon emissions. This is likely due to factors like having to heat rooms over a larger surface area and an increased number of appliances. Specifically, the 10-rooms category appears to have a lot of variability since the range is substantially bigger. This could be because of a greater number of outliers or the presence of skewed data.

![](../../data_cache/vignettes/regression/boxplot_age.html){width="100%" height="600px"}

![](../../data_cache/vignettes/regression/boxplot_rooms.html){width="100%" height="600px"}


## The model

With the data provided we can fit a mixed linear model  where shortfall is the outcome variable and the number of rooms and age are the fixed effects.
Below is the summary of the fixed effects produced.

```{python}
#| echo: false
#| eval: true
#| results: 'asis'
with open('../../data_cache/vignettes/regression/model_fit.txt') as f:
    content = f.read()
    print(content)
```

From the results we can determine that age has a negative effect on the shortfall as, compared to the shortfall the age coefficient is -2.981. It reinforces the hypothesis that newer buildings have reduced carbon emissions compared to older buildings. On the other hand, the number of rooms appears to have a positive effect on shortfall. This is to be expected since more rooms require a higher energy consumption. The coefficient of group variation being 0.4 indicates that shortfall varies moderately within the local authority.

## The key insight

We can observe the caterpillar plot of random effects for the different local authorities.


![](../../data_cache/vignettes/regression/caterpillar.html){width="100%" height="600px"}

Each point on the plot represents the random effect for the local authority while the lines represent a 95% confidence interval. In the caterpillar plot we can observe that many values fall above and below the population mean. However, the majority of the random effects cross the mean so there is not a great deviation from the average.

## Record of AI use for MTHM503 Regression coursework

Instructions: You can use this document to record when, how and why you used GenAI to complete your assessment. It will help you create a record of AI use to submit alongside your references for AI-integrated and AI-assisted assignments. It may also be useful to help you discuss your AI use if you are required to do so in an academic conduct meeting.

| **Date**       | **AI tool used** | **Purpose**                                | **Prompt**                                 | **Hyperlink to output (where possible)** | **Section of work used for** |
|----------------|------------------|--------------------------------------------|--------------------------------------------|------------------------------------------|-------------------------------|
                  |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
|                |                  |                                            |                                            |                                          |                               |
